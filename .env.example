# ============================================
# Laravel Environment Configuration
# ============================================
# Este archivo contiene todas las variables de entorno que Laravel necesita
# Para Docker Compose, las variables específicas de Docker están en env/*.env.example
# 
# Copia este archivo a .env y ajusta los valores según tu entorno

# ============================================
# Application Configuration
# ============================================
APP_NAME=apygg
APP_ENV=dev
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost
APP_TIMEZONE=UTC

# Octane Server Configuration
OCTANE_SERVER=frankenphp

# ============================================
# Localization
# ============================================
APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

# ============================================
# Logging Configuration
# ============================================
LOG_CHANNEL=stack
LOG_LEVEL=debug
LOG_ASYNC=false
LOG_STACK=single,sentry_logs
ACTIVITY_LOGGING=true

# ============================================
# Security Logging Configuration
# ============================================
SECURITY_LOGGING_ENABLED=true
SECURITY_LOG_SUSPICIOUS_URLS=true
SECURITY_LOG_MALICIOUS_HEADERS=true
SECURITY_LOG_INJECTION_ATTEMPTS=true
SECURITY_LOG_AUTH_ERRORS=true
SECURITY_LOG_CORS_VIOLATIONS=true
SECURITY_LOG_RATE_LIMIT=true
SECURITY_LOG_WEBHOOKS=true
SECURITY_LOG_FAILED_LOGINS=true
SECURITY_LOG_UNUSUAL_ACTIVITY=true
SECURITY_LOG_EXCEPTIONS=true

# ============================================
# Database Configuration
# ============================================
# Nota: Los valores de DB_HOST, DB_PORT, etc. se configuran según el entorno:
# - Con Docker: usar nombres de servicios (postgres, redis) en env/dev.env
# - Sin Docker: usar hosts reales (localhost, 127.0.0.1, etc.)
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=apygg
DB_USERNAME=apygg
DB_PASSWORD=
DB_POOL=10
DB_TIMEOUT=5



# ============================================
# Redis Configuration
# ============================================
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=null
REDIS_DB=0

# ============================================
# Cache & Queue Configuration
# ============================================
CACHE_STORE=redis
QUEUE_CONNECTION=redis
REDIS_QUEUE_RETRY_AFTER=60
REDIS_MAX_RETRIES=3
REDIS_BACKOFF_ALGORITHM=decorrelated_jitter
SESSION_DRIVER=redis

# ============================================
# Broadcasting Configuration (Reverb)
# ============================================
BROADCAST_CONNECTION=reverb
REVERB_APP_ID=local-app
REVERB_APP_KEY=
REVERB_APP_SECRET=
REVERB_SERVER_HOST=0.0.0.0
REVERB_SERVER_PORT=8080
REVERB_HOST=localhost
REVERB_PORT=443
# REVERB_SCHEME=wss

# ============================================
# Scout + Meilisearch Configuration
# ============================================
SCOUT_DRIVER=meilisearch
MEILISEARCH_HOST=http://127.0.0.1:7700
MEILISEARCH_KEY=
SCOUT_QUEUE=true

# ============================================
# Filesystem Configuration
# ============================================
FILESYSTEM_DISK=local

# Para producción con S3:
# FILESYSTEM_DISK=s3
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=us-east-1
# AWS_BUCKET=
# AWS_USE_PATH_STYLE_ENDPOINT=false

# ============================================
# JWT Authentication Configuration
# ============================================
JWT_TTL=15
JWT_SECRET=
JWT_ALGO=HS256
JWT_REFRESH_TTL=10080
JWT_BLACKLIST_ENABLED=true
JWT_BLACKLIST_GRACE=30

# ============================================
# Social Authentication (Socialite)
# ============================================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=${APP_URL}/auth/google/callback

FACEBOOK_CLIENT_ID=
FACEBOOK_CLIENT_SECRET=
FACEBOOK_REDIRECT_URI=${APP_URL}/auth/facebook/callback

# ============================================
# Error Tracking (Sentry)
# ============================================
SENTRY_LARAVEL_DSN=
SENTRY_ENVIRONMENT=production
# Specify a fixed sample rate
SENTRY_TRACES_SAMPLE_RATE=1.0
# Set a sampling rate for profiling - this is relative to traces_sample_rate
SENTRY_PROFILES_SAMPLE_RATE=1.0
# Enable logs to be sent to Sentry
SENTRY_ENABLE_LOGS=true

# ============================================
# Development Tools
# ============================================
TELESCOPE_ENABLED=true

# ============================================
# CORS Configuration
# ============================================
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
CORS_DEBUG_LOG=false

# Password Hashing Configuration
# ============================================
HASH_DRIVER=argon2id
ARGON_MEMORY=65536
ARGON_TIME=5
ARGON_THREADS=3
BCRYPT_ROUNDS=12

# ============================================
# Mail Configuration (Opcional)
# ============================================
MAIL_MAILER=smtp
MAIL_HOST=mailpit
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

# ============================================
# Additional Services (Opcional)
# ============================================
HORIZON_PREFIX=horizon
HORIZON_BALANCE=auto
HORIZON_MAX_PROCESSES=10
