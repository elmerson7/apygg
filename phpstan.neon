includes:
    - vendor/larastan/larastan/extension.neon

parameters:
    paths:
        - app
        - database/factories
        - database/seeders

    # Rule level (0 is the loosest and 9 is the strictest)
    level: 5

    ignoreErrors:
        # Propiedades dinámicas de Eloquent (comunes en Laravel)
        - '#Access to an undefined property.*\$id#'
        - '#Access to an undefined property.*\$created_at#'
        - '#Access to an undefined property.*\$updated_at#'
        - '#Access to an undefined property.*\$deleted_at#'
        - '#Access to an undefined property.*\$permissions#'
        # Problemas de PHPDoc con fillable (compatibilidad con Laravel)
        - '#PHPDoc type array<int, string>.*\$fillable.*list<string>#'
        # Problemas menores de tipos en traits y servicios
        - '#Call to an undefined method.*onlyTrashed\(\)#'
        # Traits no usados (pueden usarse en el futuro)
        - '#Trait.*is used zero times#'
        # Problemas conocidos con factories de Laravel (newFactory retorna Factory pero PHPStan espera Factory<static>)
        # Estos son falsos positivos - el código funciona correctamente
        # Los archivos están excluidos en excludePaths para evitar estos errores
        # Dead catch - TokenBlacklistedException se captura específicamente antes de JWTException (correcto)
        - '#Dead catch.*TokenBlacklistedException#'

    excludePaths:
        - ./*/*/FileToIgnore.php
        # Excluir archivos con problemas conocidos de PHPStan con Laravel factories (newFactory)
        - app/Models/Logs/ActivityLog.php
        - app/Models/Logs/ApiLog.php
        - app/Models/Logs/ErrorLog.php
        - app/Models/Logs/SecurityLog.php
